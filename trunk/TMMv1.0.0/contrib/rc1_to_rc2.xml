<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
<header>
	<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>

	<title lang="en">Topic Multi-Moderation</title>
	
	<description lang="en">This MOD adds a quick and easy way to perform multiple moderation tasks with one click. Configurable via the ACP.</description>

	<author-notes lang="en">If you would like to make a donation for my work done on this MOD as well as other MODs, you may do so by going to the demo/test board (http://www.phpbbdevelopers.net/) and clicking the Donate button in the header. All donations are voluntary but appreciated.</author-notes>

	<author-group>
		<author>
			<username>imkingdavid</username>
			<realname>David King</realname>
			<homepage>http://www.phpbbdevelopers.net</homepage>
			<email>imkingdavid@gmail.com</email>
		</author>
	</author-group>

	<mod-version>1.0.0</mod-version>

	<installation>
		<level>intermediate</level>
		<time>300</time>
		<target-version>3.0.7-PL1</target-version>
	</installation>
	<history>
		<entry>
			<date>2010-05-29</date>
			<rev-version>1.0.0rc4</rev-version>
			<changelog lang="en">
				<change>[fix] incompatibility with SEO friendly URL MOD when posting a new topic with prefixes</change>
			</changelog>
		</entry>
		<entry>
			<date>2010-05-28</date>
			<rev-version>1.0.0rc3</rev-version>
			<changelog lang="en">
				<change>[fix] language variable in PMs being overwritten</change>
				<change>[fix] bug in ACP module when deleting multi-mods</change>
				<change>[fix] method being declared twice</change>
			</changelog>
		</entry>
		<entry>
			<date>2010-05-22</date>
			<rev-version>1.0.0rc2</rev-version>
			<changelog lang="en">
				<change>[fix] apply prefix on new post</change>
			</changelog>
		</entry>
		<entry>
			<date>2010-05-22</date>
			<rev-version>1.0.0rc1</rev-version>
			<changelog lang="en">
				<change>[change] Uses hooks and static methods to reduce file edits, and cache to increase efficiency (thanks Erik Frerejean for the idea)</change>
				<change>[add] Topic Prefixes show up in more locations, such as MCP and Search</change>
			</changelog>
		</entry>
		<entry>
			<date>2010-05-02</date>
			<rev-version>0.2.1</rev-version>
			<changelog lang="en">
				<change>[Change] Removed extraneous "Recheck" link from version checker</change>
				<change>[Fix] Unable to add same prefix multiple times (unless applied by multi-mod)</change>
			</changelog>
		</entry>
		<entry>
			<date>2010-05-01</date>
			<rev-version>0.2.0</rev-version>
			<changelog lang="en">
				<change>[Change] Complete code rewrite</change>
				<change>[Feature] Tokens in prefix (i.e. {USERNAME} and {DATE})</change>
				<change>[Feature] Add multiple prefixes to topic</change>
				<change>[Feature] Added more flexibility for better control per prefix and multi-mod</change>
				<change>[Note] Not backwards compatible.</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-12-16</date>
			<rev-version>0.1.4 BETA</rev-version>
			<changelog lang="en">
				<change>[Fix] bug in ACP prefixes edit module</change>
				<change>[Fix] color swatch in ACP prefixes module</change>
				<change>[Fix] for bug caused by another MOD (topic_status cannot be NULL)</change>
				<change>[Note] never released</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-09-13</date>
			<rev-version>0.1.3 BETA</rev-version>
			<changelog lang="en">
				<change>[Change]Changed the version numbering from 1.0.0 BETA # to 0.1.# BETA.</change>
				<change>[Fix] errors generated in posting.php</change>
				<change>[Fix] errors generated in viewtopic.php (thanks tbxn)</change>
				<change>[Fix] made module() function in info/acp_tmm.php a public function (thanks tbxn)</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-09-01</date>
			<rev-version>0.1.2 BETA</rev-version>
			<changelog lang="en">
				<change>[Change] Changed permission settings (now there are separte admin permissions, as well as separate forum-specific permissions for multi-mods and prefixes).</change>
				<change>[Fix] Fixed various bugs in posting.php, posting_editor.html</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-09-01</date>
			<rev-version>0.1.1 BETA</rev-version>
			<changelog lang="en">
				<change>[Fix] Fixed ANOTHER bug in prefix dropdown menu on posting</change>
				<change>[Fix] Fixed various template bugs</change>
				<change>[Fix] Fixed various viewforum, posting, and viewtopic bugs</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-08-31</date>
			<rev-version>0.1.0 BETA</rev-version>
			<changelog lang="en">
				<change>[Fix] Fixed bug in prefix dropdown menu on posting</change>
				<change>[Feature] Added copy ability for multi-mods</change>
				<change>[Feature] Added UMIL automated install/uninstall/update file: tmm_install.php</change>
				<change>[Feature] Verified AutoMOD compatibility</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-08-25</date>
			<rev-version>0.0.3 ALPHA</rev-version>
			<changelog lang="en">
				<change>[Change] Added support for separate prefix use on posting.php (new thread and edit first post screen)</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-08-23</date>
			<rev-version>0.0.2 ALPHA</rev-version>
			<changelog lang="en">
				<change>[Fix] Made a few fixes to the install.xml file</change>
				<change>[Change] Changed database tables (added default value)</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-08-23</date>
			<rev-version>0.0.1 ALPHA</rev-version>
			<changelog lang="en">
				<change>Completed bulk of the coding</change>
				<change>Released first alpha version</change>
			</changelog>
		</entry>
		<entry>
			<date>2009-08-15</date>
			<rev-version>0.0.0 DEV</rev-version>
			<changelog lang="en">
				<change>Begun development</change>
			</changelog>
		</entry>
	</history>
	<link-group>
		<link type="parent" href="../install.xml" lang="en">Main Install Instructions</link>
		<link type="contrib" href="rc2_to_rc3.xml" lang="en">Update from RC2 to RC3</link>
		<link type="contrib" href="rc3_to_rc4.xml" lang="en">Update from RC3 to RC4</link>
	</link-group>
</header>

<action-group>
	<open src="posting.php">
		<edit>
			<find><![CDATA[$redirect_url = submit_post($mode, $post_data['post_subject'], $post_data['username'], $post_data['topic_type'], $poll, $data, $update_message, ($update_message || $update_subject) ? true : false);]]></find>
			<action type="after-add"><![CDATA[//! Begin TMM
			if($mode == 'post' && !empty($prefixes) && is_array($prefixes))
			{
				foreach($prefixes AS $prefix)
				{
					$redir_url_split = explode('t=', $redirect_url);
					tmm::apply_prefix($prefix, $redir_url_split[1]); //$redir_url_split[1] contains the topic ID
				}
			}
			//! End TMM]]></action>
		</edit>
	</open>
	<diy-instructions lang="en"><![CDATA[This should only be used to update from rc1 to rc2. The main installation MODx file should be used to install the MOD for the first time.
	
	If you appreciate my work and would like to donate to me in order to support the development of this and other MODs, please do so by visiting http://www.phpbbdevelopers.net/ and clicking Donate in the navigation menu. All amounts are appreciated, and no donation is required for use of this MOD.]]>
	</diy-instructions>
</action-group>
</mod>